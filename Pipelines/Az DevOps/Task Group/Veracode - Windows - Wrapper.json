{"tasks":[{"environment":{},"displayName":"Create ZIP","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$sourcePath = Get-Location\n$destinationPath = \"$(caminhoPacote)\"\n\n# Filtrar os arquivos com as extens√µes desejadas\n$filesToInclude = Get-ChildItem -Path $sourcePath -Include *.dll, *.pdb -File -Recurse\n\n# Criar o arquivo zip com os arquivos filtrados\nCompress-Archive -Path $filesToInclude.FullName -DestinationPath $destinationPath\n\n","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Download Wrapper","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"Write-Host \"Configurando: Wrapper\"\n$pastaferramenta = \"$(Build.ArtifactStagingDirectory)\"\n$urlDownload = \"https://tools.veracode.com/integrations/API-Wrappers/C%23/bin/VeracodeC%23API.zip\" \n$caminhoDownload = \"$env:LOCALAPPDATA/VeracodeAPI.zip\" \nInvoke-WebRequest -Uri \"$urlDownload\" -OutFile \"$caminhoDownload\" \nExpand-Archive -Path \"$caminhoDownload\" -DestinationPath \"$pastaferramenta\" -Force\nRename-Item -Path \"$pastaferramenta/VeracodeC#API.exe\" -NewName \"$pastaferramenta/VeracodeAPI.exe\" -Force\nRemove-Item \"$caminhoDownload\" # Remove o arquivo de download\nWrite-Host \"Finalizado\"","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode U&S","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$(Build.ArtifactStagingDirectory)/VeracodeAPI.exe -vid $(VeracodeID) -vkey $(VeracodeKey) -action UploadAndScan -appname \"$(veracodeAppProfile)\" -createprofile true -filepath \"$(caminhoPacote)\" -version $(build.buildNumber)\n","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode SCA - Componentes de Terceiros","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"targetType":"inline","filePath":"","arguments":"","script":"$env:SRCCLR_SCM_NAME=$(veracodeAppProfile)\n$env:SRCCLR_API_TOKEN=$(VeracodeSCA)\niex ((New-Object System.Net.WebClient).DownloadString('https://download.srcclr.com/ci.ps1'))\nsrcclr scan --update-advisor --allow-dirty","errorActionPreference":"stop","warningPreference":"default","informationPreference":"default","verbosePreference":"default","debugPreference":"default","progressPreference":"silentlyContinue","failOnStderr":"false","showWarnings":"false","ignoreLASTEXITCODE":"false","pwsh":"false","workingDirectory":"","runScriptInSeparateScope":"false"},"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Download - Veracode Pipeline Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":"curl -O -L https://downloads.veracode.com/securityscan/pipeline-scan-LATEST.zip\n","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}},{"environment":{},"displayName":"Extract - Veracode Pipeline Scan","alwaysRun":false,"continueOnError":false,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"archiveFilePatterns":"pipeline-scan-LATEST.zip","destinationFolder":"$(Build.ArtifactStagingDirectory)","cleanDestinationFolder":"false","overwriteExistingFiles":"false","pathToSevenZipTool":""},"task":{"id":"5e1e3830-fbfb-11e5-aab1-090c92bc4988","versionSpec":"1.*","definitionType":"task"}},{"environment":{},"displayName":"Veracode PipelineScan","alwaysRun":false,"continueOnError":true,"condition":"succeeded()","enabled":true,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"inputs":{"script":"java -jar $(Build.ArtifactStagingDirectory)/pipeline-scan.jar -vid $(VeracodeID) -vkey $(VeracodeKey) --file $(caminhoPacote) --issue_details true\n","workingDirectory":"","failOnStderr":"false"},"task":{"id":"d9bafed4-0b18-4f58-968d-86655b4d2ce9","versionSpec":"2.*","definitionType":"task"}}],"runsOn":["Agent","DeploymentGroup"],"revision":5,"createdBy":{"displayName":"Ivo Dias","id":"bb8961b9-f454-699f-a68f-6f424a751c27","uniqueName":"igd753@gmail.com"},"createdOn":"2023-09-08T15:50:37.650Z","modifiedBy":{"displayName":"Ivo Dias","id":"bb8961b9-f454-699f-a68f-6f424a751c27","uniqueName":"igd753@gmail.com"},"modifiedOn":"2023-09-08T15:58:49.253Z","comment":"","id":"1ee7f7ea-6678-41bf-bb28-c27d23171c62","name":"Veracode - Windows - Wrapper","version":{"major":1,"minor":0,"patch":0,"isTest":false},"iconUrl":"https://cdn.vsassets.io/v/M219_20230330.10/_content/icon-meta-task.png","friendlyName":"Veracode - Windows - Wrapper","description":"Please review the info in this link:\nhttps://docs.veracode.com/r/c_comp_quickref","category":"Utility","definitionType":"metaTask","author":"Ivo Dias","demands":[],"groups":[],"inputs":[{"aliases":[],"options":{},"properties":{},"name":"caminhoPacote","label":"caminhoPacote","defaultValue":"$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"veracodeAppProfile","label":"veracodeAppProfile","defaultValue":"","required":true,"type":"string","helpMarkDown":"","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VeracodeID","label":"VeracodeID","defaultValue":"","required":true,"type":"string","helpMarkDown":"Enter your Veracode API ID. For instructions on generating your API credentials, go to the Veracode Help Center and search for \"Generate Veracode API Credentials\".","groupName":""},{"aliases":[],"options":{},"properties":{},"name":"VeracodeKey","label":"VeracodeKey","defaultValue":"","required":true,"type":"string","helpMarkDown":"Enter your Veracode API key. For instructions on generating your API credentials, go to the Veracode Help Center and search for \"Generate Veracode API Credentials\".","groupName":""}],"satisfies":[],"sourceDefinitions":[],"dataSourceBindings":[],"instanceNameFormat":"Task group: Veracode - Windows - Wrapper $(caminhoPacote)","preJobExecution":{},"execution":{},"postJobExecution":{},"_buildConfigMapping":{}}